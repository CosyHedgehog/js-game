#combat-area {
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid #444;
    border-radius: 8px;
    padding: 20px;
    margin: 10px 0;
    position: relative;
    margin-top: auto;    /* Center vertically */
    margin-bottom: auto; /* Center vertically */
    width: 100%; /* Ensure full width */
    box-sizing: border-box; /* Include padding in width */
}

#round-indicator-area {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin: 10px 0;
    padding: 10px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
}

.round-orb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background-color: #2c3e50;
    border: 1px solid #34495e;
}

.round-orb.current-round {
    background-color: #3498db;
    border-color: #2980b9;
    box-shadow: 0 0 10px rgba(76, 175, 80, 0.3);
}

.combat-container {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 20px;
    margin: 20px 0;
    position: relative;
}

.combatant {
    /* flex: 1; */ /* Removed */
    flex-basis: 45%; /* Set base width */
    flex-grow: 0; /* Prevent growing */
    flex-shrink: 1; /* Allow shrinking (default) */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between; /* Distribute items vertically */
    gap: 10px;
    padding: 20px;
    /* background: rgba(0, 0, 0, 0.2); */
    background: #2a2a2a; /* Updated background color */
    border-radius: 8px;
    position: relative;
    border: 1px solid #333;
    min-height: 200px; /* Add min-height to stabilize layout */
}

.combatant-name {
    font-size: 1.2em;
    font-weight: bold;
    color: #fff;
    text-align: center;
    margin-bottom: 10px;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

.combat-vs {
    font-size: 2em;
    font-weight: bold;
    color: #666;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    align-self: center; /* Vertically center VS text */
}

.health-bar-container {
    width: 100%;
    height: 20px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 10px;
    overflow: hidden;
    position: relative;
    border: 1px solid rgba(255, 255, 255, 0.1); /* Match timer border */
    box-sizing: border-box; /* Include border in height */
}

.health-bar {
    height: 100%;
    transition: width 0.3s ease-out;
    border-radius: 10px;
    box-sizing: border-box; /* Add box-sizing */
}

.player-side:not(.player-poisoned) .player-health {
    background: #4CAF50;
}

.enemy-side .enemy-health {
    background: #4CAF50;
}

.health-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #fff;
    font-size: 0.8em;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    white-space: nowrap;
}

.combat-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-top: 10px;
    width: 100%;
}

.combat-stats div {
    text-align: center;
    font-size: 0.9em;
    color: #ccc;
    background: rgba(0, 0, 0, 0.2);
    padding: 5px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.3em;
}

#combat-enemy-hp,
#combat-player-hp,
#combat-player-atk,
#combat-player-def,
#combat-player-spd,
#combat-enemy-atk,
#combat-enemy-def,
#combat-enemy-spd {
    cursor: default;
}

.combat-stats #combat-enemy-atk.enraged {
    color: #f44336;
    font-weight: bold;
}

.combat-stats #combat-enemy-def.hardened {
    color: #2196F3;
    font-weight: bold;
}

.combat-stats #combat-enemy-def.ferocity-active {
    color: #ffc107; /* Amber/Yellow */
    font-weight: bold;
}

.attack-timer {
    width: 100%;
    height: 20px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 10px;
    overflow: hidden;
    position: relative;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-sizing: border-box; /* Include border in height */
}

.timer-bar {
    height: 100%;
    background-color: #3498db;
    transition: width 0.1s linear;
}

/* Stun Timer Bar Color */
.enemy-stun-timer {
    background-color: #ffc107; /* Amber/Yellow */
}

.timer-text {
    color: #ddd;
    font-size: 0.9em;
    text-align: center;
    margin-top: 5px;
}

.damage-splat-container {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    overflow: hidden;
}

.damage-splat {
    position: absolute;
    font-weight: bold;
    padding: 5px 10px;
    border-radius: 4px;
    animation: splat-animation 1.5s ease-out forwards;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    z-index: 1000;
    left: 50%;
    font-size: 2.0em; /* Increased font size */
    white-space: nowrap; /* Prevent text wrapping */
}

.damage-splat.damage {
    color: #f44336;
}

.damage-splat.blocked {
    color: #2196F3;
}

.damage-splat.heal {
    color: #4CAF50;
}

.damage-splat.sell {
    color: #ffd700;
}

.damage-splat.potion-heal {
    color: #9C27B0;
}

.damage-splat.buff-attack {
    color: #ff6b6b;
    font-size: 1.4em;
    padding: 6px 10px;
}

.damage-splat.buff-defense {
    color: #63e6be;
    font-size: 1.4em;
    padding: 6px 10px;
}

.damage-splat.buff-speed {
    color: #ffd700;
    font-size: 1.4em;
    padding: 6px 10px;
}

.damage-splat.poison {
    color: #ab47bc;
    font-style: italic;
}

.damage-splat.zero-damage {
    color: #80bfff;
    font-style: normal;
}

.damage-splat.stun {
    color: #ffff99;
    font-weight: bold;
    font-style: italic;
    font-size: 1.6em;
}

.damage-splat.burn {
    color: #ff8c00;
    text-shadow: 0 0 3px #ff4500, 0 0 5px #ff0000;
}

.combat-controls {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
}

#combat-run-button {
    background: #f44336;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s;
}

#combat-run-button:hover:not(:disabled) {
    background: #d32f2f;
    transform: translateY(-2px);
}

#combat-run-button:active {
    background: #b71c1c;
    transform: translateY(0);
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.3);
}

#combat-run-button:disabled {
    background: #666;
    cursor: not-allowed;
    opacity: 0.7;
}

.enemy-pack-tactics {
    animation: packTacticsActivate 0.8s ease-in-out;
}

.enemy-side[data-pack-tactics="active"] .monster-stat {
    transition: all 0.3s ease;
    border: 2px solid #ffd700;
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
}

.enemy-enraged-pulse {
    animation: enrage-shake 0.5s ease-in-out;
    border: 2px solid #ff4444 !important;
}

.enemy-speed-enraged-pulse {
    animation: speed-enrage-pulse 0.5s ease-in-out;
}

.enemy-scales-harden {
    animation: scales-harden-effect 1s ease-out forwards;
}

.player-breath-hit {
    animation: breath-hit-effect 0.5s ease-out;
}

.player-stunned-visual {
    animation: player-stunned-shake 0.4s ease-in-out 2;
    filter: grayscale(50%);
}

.player-poisoned .player-health {
    animation: poisoned-health-bar-drip 1.5s infinite ease-in-out;
}

.player-side.player-burning {
    animation: burning-pulse 1s ease-in-out infinite;
}

/* Encounter Styles */
.encounter-confirmation {
    background: rgba(0, 0, 0, 0.8);
    border: 1px solid #444;
    border-radius: 8px;
    padding: 20px;
    margin: 20px auto;
    max-width: 600px;
    text-align: center;
}

.encounter-details {
    margin: 20px 0;
    max-height: 300px;
    overflow-y: auto;
    padding: 10px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
    text-align: left;
}

.confirmation-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 20px;
}

.confirm-button {
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
}

.confirm-button.difficulty-easy {
    background: #4CAF50;
}

.confirm-button.difficulty-medium {
    background: #FF9800;
}

.confirm-button.difficulty-hard {
    background-color: #f44336 !important;
}

.confirm-button:hover {
    transform: translateY(-2px);
    filter: brightness(1.1);
}

.confirm-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        120deg,
        transparent,
        rgba(255, 255, 255, 0.3),
        transparent
    );
    transition: 0.5s;
}

.confirm-button:hover::before {
    left: 100%;
}

.encounter-starting {
    animation: encounterStart 0.5s ease-out forwards;
}

@keyframes encounterStart {
    0% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.1);
        opacity: 0.5;
    }
    100% {
        transform: scale(0);
        opacity: 0;
    }
}

.encounter-details::-webkit-scrollbar {
    width: 8px;
}

.encounter-details::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
}

.encounter-details::-webkit-scrollbar-thumb {
    background: #666;
    border-radius: 4px;
}

.encounter-details::-webkit-scrollbar-thumb:hover {
    background: #777;
}

#combat-area p {
    margin: 10px 0;
    line-height: 1.5;
    color: #ddd;
}

/* --- Breath Timer Specific Styles --- */
.breath-timer {
    margin-top: 5px;
}

.breath-timer .timer-bar {
    background: linear-gradient(to right, #ff8c00, #e65c00);
}

.breath-timer .timer-text {
    color: #ffcc80;
}

.breath-timer.hidden {
    display: none;
}

/* --- Regeneration Timer Specific Styles --- */
.regen-timer {
    margin-top: 5px;
}

.regen-timer .timer-bar {
    background: linear-gradient(to right, #66bb6a, #43a047); /* Light green gradient */
}

.regen-timer .timer-text {
    color: #a5d6a7; /* Lighter green text */
}

.regen-timer.hidden {
    display: none;
}

/* Venfing Speed Boost Timer Indicator */
.enemy-side .attack-timer.enemy-timer-speed-boost {
    border: 2px solid #00e0ff;
    box-shadow: 0 0 8px rgba(0, 224, 255, 0.6);
    border-radius: 10px;
    animation: speed-boost-pulse 1.2s infinite ease-in-out;
    margin-top: 3px;
    margin-bottom: 3px;
}

/* Player Poisoned Indicator */
.player-poisoned {
    border: 2px solid #8f00ff !important;
    box-shadow: 0 0 10px rgba(143, 0, 255, 0.7);
}

/* Add inventory stun style */
.inventory-slot.food-stunned {
    filter: grayscale(80%) brightness(0.7);
    box-shadow: inset 0 0 8px rgba(255, 0, 0, 0.5);
    cursor: default;
}

/* Round Area - Enhance and Center */
#round-area {
    display: flex;
    justify-content: center; 
    align-items: center;    
    width: 100%;            
    margin-bottom: 15px; /* Keep space below */
    /* Add styles similar to player-stats-area-2 */
    background-color: #222;
    border: 1px solid #484848;
    border-radius: 5px;
    padding: 10px; /* Add some padding */
    box-sizing: border-box; /* Ensure padding included */
}

#round-area .stat-item { /* Apply styles to the container */
    display: inline-flex; /* Use inline-flex to keep content together */
    align-items: baseline; /* Align text baseline */
    /* Remove specific background/border/shadow/pill shape */
    /* background: linear-gradient(to bottom, #5a5a5a, #454545); */
    /* border: 1px solid #888; */
    /* box-shadow: 0 2px 5px rgba(0,0,0,0.4), inset 0 1px 1px rgba(255,255,255,0.15); */
    /* padding: 6px 18px; */ /* Padding now on #round-area */
    /* border-radius: 25px; */ 
    font-size: 1.0em; /* Adjust font size if needed */
    color: #fff;
    text-align: center;
    /* min-width: 130px; */ /* Remove min-width */
}

#round-area .stat-label {
    /* Make label consistent with stats panel */
    /* background: none; */ 
    /* padding: 0; */
    /* color: #ccc; */
    /* font-size: 0.9em; */ 
    margin-right: 8px; /* Space after label */
    /* font-weight: normal; */
    vertical-align: baseline; /* Align with numbers */
    
    /* Copied from .stat-label in stats.css */
    grid-column: 1;
    justify-self: start;
    color: #ddd;
    font-weight: bold;
    flex-shrink: 0;
    background-color: #4a4a4a;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.9em; /* Adjusted from 1em */
    display: inline-block;
    line-height: 1.2;
    text-align: center;
    white-space: nowrap;
}

#round-area #stat-round, 
#round-area .round-separator, 
#round-area #stat-max-rounds {
    font-weight: bold;
    color: #fff;
    display: inline; /* Keep elements inline */
    vertical-align: baseline; /* Align numbers */
    font-size: 1.0em; /* Ensure consistent size */
}

#round-area .round-separator {
    margin: 0 3px; /* Space around slash */
    color: #aaa;
    font-weight: normal;
}

/* Set default cursor for all spans inside round area */
#round-area span {
    cursor: default;
}

.round-pulsing {
    /* Target the #round-area element for pulsing */
    animation: round-update-pulse 0.7s ease-out; 
}

/* Apply boss glows directly to #round-area */
#round-area.round-miniboss {
    animation: miniboss-glow 1.5s infinite ease-in-out;
}

#round-area.round-finalboss {
    animation: finalboss-flame 1.2s infinite ease-in-out;
}

/* --- Combat End/Loot Screen Transitions --- */
.combat-ending {
  animation: combat-fade-out 0.5s ease-out forwards; /* forwards keeps it hidden */
  pointer-events: none; /* Prevent interaction during fade */
}

.damage-splat.inventory-splat {
    font-size: 2em; 
    animation: inventory-splat-animation 1s ease-out forwards; /* Use specific animation */
}

.damage-splat.damage {
    color: #f44336;
}


